/**
 * Shared file between builds so that they can all use the same dependencies and
 * maven repositories.
 **/

def androidVersions = [:]
androidVersions.minSdk = 21
androidVersions.compileSdk = 29
androidVersions.buildTools = '29.0.3'
androidVersions.targetSdk = 29
ext.androidVersions = androidVersions

ext.deps = [:]
def versions = [:]
versions.androidXAppCompact = "1.1.0"
versions.androidXBrowser = "1.2.0"
versions.androidXCardView = "1.0.0"
versions.androidXCore = "1.2.0"
versions.androidXExifinterface = "1.2.0"
versions.androidXLegacy = "1.0.0"
versions.androidXMaterial = "1.2.0-alpha06" // The non stable version adds functionalities to TextInputLayout
versions.androidXPercentLayout = "1.0.0"
versions.androidXPreferences = "1.1.1"
versions.androidXTestEspresso = "3.2.0"
versions.androidXTestJunit = "1.1.1"
versions.androidXTransition = "1.3.1"
versions.androidXViewPager2 = "1.0.0"
versions.archLifecycle = "2.2.0"
versions.archNavigationArchComponent = "2.2.2"
versions.archWorkManager = '2.3.4'
versions.coil = "0.10.0"
versions.constraint_layout = "1.1.3"
versions.crashlytics = "2.10.1@aar"
versions.debugDb = "1.0.6"
versions.dependencyUpdates = '0.28.0'
versions.detekt = "1.8.0"
versions.fabric = '1.31.2'
versions.firebase_analytics = "17.4.0"
versions.firebase_config = "19.1.3"
versions.firebase_messaging = "20.1.6"
versions.googleServices = "4.3.3"
versions.gradle = "3.6.3"
versions.gson = "2.8.6"
versions.junit = "4.13"
versions.koin = "2.1.5"
versions.kotlin = "1.3.72"
versions.kotlinCoroutines = "1.3.5"
versions.leakcanary = "2.2"
versions.lottie = "3.4.0"
versions.ok2CurlInterceptor = "0.5.0"
versions.okhttp3 = "4.5.0"
versions.okIo = "2.6.0"
versions.once = "1.3.0"
versions.recyclerDragSelect = "53d66e0eb5"
versions.recyclerView = "1.1.0"
versions.retrofit2 = "2.8.1"
versions.rxAndroid = "2.1.1"
versions.rxKotlin = "2.4.0"
versions.snapshotPublisher = "2.1.0"
versions.stetho = "1b2c025a14"
versions.tooLargeTool = "915ad99e83"
ext.versions = versions


def deps = [:]
deps.coil = "io.coil-kt:coil:$versions.coil"
deps.crashlytics = "com.crashlytics.sdk.android:crashlytics:$versions.crashlytics"
deps.debugDb = "com.amitshekhar.android:debug-db:$versions.debugDb"
deps.gson = "com.google.code.gson:gson:$versions.gson"
deps.koin = "org.koin:koin-android-viewmodel:$versions.koin"
deps.junit = "junit:junit:$versions.junit"
deps.leakcanary = "com.squareup.leakcanary:leakcanary-android:$versions.leakcanary"
deps.lottie = "com.airbnb.android:lottie:$versions.lottie"
deps.okIo = "com.squareup.okio:okio:$versions.okIo"
deps.once = "com.jonathanfinerty.once:once:$versions.once"
deps.stetho = "com.github.mathroule.stetho:stetho:$versions.stetho" // https://github.com/facebook/stetho/issues/652
deps.tooLargeTool = "com.github.xmartlabs:toolargetool:$versions.tooLargeTool"


def kotlin = [:]
kotlin.core = "org.jetbrains.kotlin:kotlin-stdlib-jdk8:$versions.kotlin"
kotlin.coroutines = [:]
kotlin.coroutines.core = "org.jetbrains.kotlinx:kotlinx-coroutines-android:$versions.kotlinCoroutines"
kotlin.coroutines.playServices = "org.jetbrains.kotlinx:kotlinx-coroutines-play-services:$versions.kotlinCoroutines"
kotlin.reflect = "org.jetbrains.kotlin:kotlin-reflect"
deps.kotlin = kotlin

def androidXTest = [:]
androidXTest.espresso = "androidx.test.espresso:espresso-core:$versions.androidXTestEspresso"
androidXTest.junit = "androidx.test.ext:junit:$versions.androidXTestJunit"

def androidX = [:]
androidX.test = androidXTest
androidX.appcompat = "androidx.appcompat:appcompat:$versions.androidXAppCompact"
androidX.cardview = "androidx.cardview:cardview:$versions.androidXCardView"
androidX.core = "androidx.core:core-ktx:$versions.androidXCore"
androidX.constraint_layout = "androidx.constraintlayout:constraintlayout:$versions.constraint_layout"
androidX.browser = "androidx.browser:browser:$versions.androidXBrowser"
androidX.design = "com.google.android.material:material:$versions.androidXMaterial"
androidX.exifinterface = "androidx.exifinterface:exifinterface:$versions.androidXExifinterface"
androidX.preference = "androidx.preference:preference:$versions.androidXPreferences"
androidX.legacy_preference = "androidx.legacy:legacy-preference-v14:$versions.androidXLegacy"
androidX.percentlayout = "androidx.percentlayout:percentlayout:$versions.androidXPercentLayout"
androidX.recyclerview = "androidx.recyclerview:recyclerview:$versions.recyclerView"
androidX.transition = "androidx.transition:transition:$versions.androidXTransition"
androidX.viewPager2 = "androidx.viewpager2:viewpager2:$versions.viewPager2"
deps.androidX = androidX


def arch = [:]
arch.workManager = "androidx.work:work-runtime-ktx:$versions.archWorkManager"
def navigation = [:]
navigation.fragment = "androidx.navigation:navigation-fragment-ktx:$versions.archNavigationArchComponent"
navigation.ui = "androidx.navigation:navigation-ui-ktx:$versions.archNavigationArchComponent"
arch.navigation = navigation
def viewmodel = [:]
viewmodel.core = "androidx.lifecycle:lifecycle-viewmodel:$versions.archLifecycle"
viewmodel.saveState = "androidx.lifecycle:lifecycle-viewmodel-savedstate:$versions.archLifecycle"
arch.viewmodel = viewmodel
deps.arch = arch

def playServices = [:]
playServices.location = "com.google.android.gms:play-services-location:$versions.playServicesLocation"
playServices.vision = "com.google.android.gms:play-services-vision:$versions.playServicesVision"
deps.playServices = playServices

def firebase = [:]
firebase.analytics = "com.google.firebase:firebase-analytics:$versions.firebase_analytics"
firebase.config = "com.google.firebase:firebase-config-ktx:$versions.firebase_config"
firebase.messaging = "com.google.firebase:firebase-messaging:$versions.firebase_messaging"
deps.firebase = firebase


def rxJava2 = [:]
rxJava2.android = "io.reactivex.rxjava2:rxandroid:$versions.rxAndroid"
rxJava2.kotlin = "io.reactivex.rxjava2:rxkotlin:$versions.rxKotlin"
deps.rxJava2 = rxJava2

def okhttp3 = [:]
okhttp3.core = "com.squareup.okhttp3:okhttp:$versions.okhttp3"
okhttp3.loggingIntercepror = "com.squareup.okhttp3:logging-interceptor:$versions.okhttp3"
okhttp3.ok2CurlInterceptor = "com.github.mrmike:ok2curl:$versions.ok2CurlInterceptor"
okhttp3.urlconnection = "com.squareup.okhttp3:okhttp-urlconnection:$versions.okhttp3"
okhttp3.stetho = "com.github.mathroule.stetho:stetho-okhttp3:$versions.stetho"
deps.okhttp3 = okhttp3

def retrofit2 = [:]
retrofit2.core = "com.squareup.retrofit2:retrofit:$versions.retrofit2"
retrofit2.gsonAdapter = "com.squareup.retrofit2:converter-gson:$versions.retrofit2"
retrofit2.rxJavaAdapter = "com.squareup.retrofit2:adapter-rxjava2:$versions.retrofit2"
deps.retrofit2 = retrofit2


ext.deps = deps

ext.buildscriptDeps = [:]
buildscriptDeps.dependencyUpdates = "com.github.ben-manes:gradle-versions-plugin:$versions.dependencyUpdates"
buildscriptDeps.detekt = "io.gitlab.arturbosch.detekt:detekt-gradle-plugin:$versions.detekt"
buildscriptDeps.fabric = "io.fabric.tools:gradle:$versions.fabric"
buildscriptDeps.googleServices = "com.google.gms:google-services:$versions.googleServices"
buildscriptDeps.gradle = "com.android.tools.build:gradle:$versions.gradle"
buildscriptDeps.kotlin = "org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin"
buildscriptDeps.kotlinExtensions = "org.jetbrains.kotlin:kotlin-android-extensions:$versions.kotlin"
buildscriptDeps.navigationSafeArgPlugin = "androidx.navigation:navigation-safe-args-gradle-plugin:$versions.archNavigationArchComponent"
buildscriptDeps.snapshotPublisher = "com.github.xmartlabs:android-snapshot-publisher:$versions.snapshotPublisher"
ext.buildscriptDeps = buildscriptDeps

def addRepos(RepositoryHandler handler) {
    handler.google()
    handler.mavenCentral()
    handler.gradlePluginPortal()
    handler.maven { url 'https://maven.fabric.io/public' }
    handler.jcenter()
    handler.maven { url "https://jitpack.io" }
}

ext.addRepos = this.&addRepos
